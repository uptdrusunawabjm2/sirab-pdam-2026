<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Sistem PDAM</title>
<style>
body{margin:0;display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(160deg,#0ea5e9,#020617);font-family:Segoe UI;color:white}
.card{background:#020617;padding:24px;border-radius:18px;width:320px;text-align:center}
input,button{width:100%;padding:12px;margin-top:10px;border-radius:10px;border:none}
button{background:#38bdf8;font-weight:bold}
#msg{margin-top:10px;color:#ef4444}
</style>
</head>
<body>

<div class="card">
<h2>LOGIN PDAM</h2>
<input id="u" placeholder="Username">
<input id="p" type="password" placeholder="Password">
<button onclick="login()">LOGIN</button>
<div id="msg"></div>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbwy8MDN7v6zH-5WbBIN3YVm0q0AchlT8y7zP7_H0nAkH3WhkeogXfzHoB_IZsHF3NSGug/exec";

async function login(){
msg.innerText="Menghubungkan...";
const fd=new FormData();
fd.append("data",JSON.stringify({
action:"login",
username:u.value.trim(),
password:p.value
}));
try{
const r=await fetch(API,{method:"POST",body:fd});
const j=await r.json();
if(!j.status){msg.innerText="Login gagal";return;}
sessionStorage.token=j.token;
sessionStorage.role=j.role;
location.href=j.role==="admin"?"admin.html":"petugas.html";
}catch{msg.innerText="Server tidak merespon";}
}
</script>

</body>
</html>
