<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Login Sistem PDAM</title>
<style>
body{margin:0;height:100vh;display:flex;align-items:center;justify-content:center;background:#020617;font-family:Segoe UI;color:white}
.card{background:#020617;border:1px solid #1e293b;border-radius:16px;padding:28px;width:360px}
input,button{width:100%;padding:12px;margin:8px 0;border-radius:10px;border:none}
button{background:#38bdf8;font-weight:700}
.err{color:#ef4444}.ok{color:#22c55e}
</style>
</head>
<body>

<div class="card">
<h2>LOGIN SISTEM PDAM</h2>
<input id="u" placeholder="Username">
<input id="p" type="password" placeholder="Password">
<button onclick="login()">LOGIN</button>
<div id="msg"></div>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbx-RUXa9NRf5GPRjouhdBwGSDJD9Gv8Am-TeqbV2D0gFBwSuNzlTx4blySQJFRM00tF/exec";

async function login(){
 msg.innerHTML="Loading...";
 let r=await fetch(API,{method:"POST",body:JSON.stringify({action:"login",username:u.value,password:p.value})});
 let j=await r.json();
 if(!j.status){msg.innerHTML="<span class='err'>Login gagal</span>";return;}
 sessionStorage.token=j.token;
 sessionStorage.role=j.role;
 location.href = j.role=="admin" ? "admin.html" : "petugas.html";
}
</script>
</body>
</html>
